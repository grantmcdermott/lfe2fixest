<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Takes an R script with lfe::felm() commands, converts them
into their fixest::feols equivalents, and then exports the resulting
script to disk. Conversion is the only thing it does. Neither the input
not output script are run."><title>Converts lfe::felm() commands into their fixest::feols() equivalents. — lfe2fixest • lfe2fixest</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Converts lfe::felm() commands into their fixest::feols() equivalents. — lfe2fixest"><meta property="og:description" content="Takes an R script with lfe::felm() commands, converts them
into their fixest::feols equivalents, and then exports the resulting
script to disk. Conversion is the only thing it does. Neither the input
not output script are run."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">lfe2fixest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/lfe2fixest.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/grantmcdermott/lfe2fixest/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Converts <code>lfe::felm()</code> commands into their <code>fixest::feols()</code> equivalents.</h1>
      <small class="dont-index">Source: <a href="https://github.com/grantmcdermott/lfe2fixest/blob/HEAD/R/lfe2fixest.R" class="external-link"><code>R/lfe2fixest.R</code></a></small>
      <div class="d-none name"><code>lfe2fixest.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Takes an R script with <code><a href="https://rdrr.io/pkg/lfe/man/felm.html" class="external-link">lfe::felm()</a></code> commands, converts them
into their <code><a href="https://lrberge.github.io/fixest/reference/feols.html" class="external-link">fixest::feols</a></code> equivalents, and then exports the resulting
script to disk. Conversion is the only thing it does. Neither the input
not output script are run.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">lfe2fixest</span><span class="op">(</span>infile <span class="op">=</span> <span class="cn">NULL</span>, outfile <span class="op">=</span> <span class="cn">NULL</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span>, robust <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="fu">felm2feols</span><span class="op">(</span>infile <span class="op">=</span> <span class="cn">NULL</span>, outfile <span class="op">=</span> <span class="cn">NULL</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span>, robust <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>infile</dt>
<dd><p>An R script containing <code><a href="https://rdrr.io/pkg/lfe/man/felm.html" class="external-link">lfe::felm()</a></code> commands. Required.</p></dd>
<dt>outfile</dt>
<dd><p>File or connection to write the resulting R script (i.e. with
<code><a href="https://lrberge.github.io/fixest/reference/feols.html" class="external-link">fixest::feols()</a></code> conversion) to. Can be the same as the input script, in
which case the the latter will obviously be overwritten. Can also be left
blank in which case nothing will be written to disk and the output will
simply be printed to screen.</p></dd>
<dt>verbose</dt>
<dd><p>Logical. Should the result be printed to screen. Defaults to
<code>FALSE</code> unless <code>outfile</code> above is left blank.</p></dd>
<dt>robust</dt>
<dd><p>Logical. By default, iid errors will be used unless cluster
variables have been specified in the <code>felm()</code> formula(s). If users would
like HC-robust standard errors, they should specify <code>TRUE</code>. Will be ignored
if the <code>felm</code> formula contains cluster variables, since the errors will
then default to cluster-robust.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An R script.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code><a href="https://rdrr.io/pkg/lfe/man/felm.html" class="external-link">lfe::felm()</a></code> and <code><a href="https://lrberge.github.io/fixest/reference/feols.html" class="external-link">fixest::feols()</a></code> provide "fixed-effects"
estimation routines for high-dimensional data. Both methods are highly
optimised, although <code>feols()</code> is newer and tends to be quite a bit faster.
The syntax between these two methods is similar, if not quite offering
drop-in replacement. This function aims to automate the conversion process;
ignoring non-relevant arguments and differing options between the two,
while doing its best to ensure that the resulting scripts will produce the
same output.</p>
<p>Note that the conversion only handles (or attempts to handle) the actual
model calls. No attempt is made to convert downstream objects or functions
like regression table construction. Although, you will probably be okay if
you use a modern table-generating package like <code>modelsummary</code>.</p>
<p>Other limitations include: (1) The function more or less implements a
literal translation of the relevant <code>felm</code> model. It doesn't support
translation for some of the specialised syntax that <code>feols()</code> offers, e.g.
multiple estimation and varying slopes. Everything should still work even
if the literal translation doesn't yield all of the additional performance
boosts and tricks that <code>feols()</code> offers. (2) The function assumes that
users always provide a dataset in their model calls; i.e. regressions with
global variables are not supported. (3) Similarly, models that are
constructed programatically (e.g. with <code>Formula()</code>) are not supported.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/lfe/man/felm.html" class="external-link">felm</a></code>, <code><a href="https://lrberge.github.io/fixest/reference/feols.html" class="external-link">feols</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co">## Write a (deliberately messy) lfe script</span></span>
<span class="r-in"><span class="va">lfe_string</span> <span class="op">=</span> <span class="st">"</span>
<span class="r-in">library(lfe)</span>
<span class="r-in">library(modelsummary)</span>
<span class="r-in"></span>
<span class="r-in">## Our toy dataset</span>
<span class="r-in">aq = airquality</span>
<span class="r-in">names(aq) = c('y', 'x1', 'x2', 'x3', 'mnth', 'dy')</span>
<span class="r-in"></span>
<span class="r-in">## Simple OLS (no FEs)</span>
<span class="r-in">mod1 = felm(y ~ x1 + x2, aq)</span>
<span class="r-in"></span>
<span class="r-in">## Add a FE and cluster variable</span>
<span class="r-in">mod2 = felm(y ~ x1 + x2 |</span>
<span class="r-in">              dy |</span>
<span class="r-in">              0 |</span>
<span class="r-in">              mnth, aq)</span>
<span class="r-in"></span>
<span class="r-in">## Add a second cluster variable and some estimation options</span>
<span class="r-in">mod3 = felm(y ~ x1 + x2 |</span>
<span class="r-in">              dy |</span>
<span class="r-in">              0 |</span>
<span class="r-in">              dy + mnth,</span>
<span class="r-in">            cmethod = 'reghdfe',</span>
<span class="r-in">            exactDOF = TRUE,</span>
<span class="r-in">            aq)</span>
<span class="r-in"></span>
<span class="r-in">## IV reg with weights</span>
<span class="r-in">mod4 = felm(y ~ 1 |</span>
<span class="r-in">              dy |</span>
<span class="r-in">              (x1 ~ x3) |</span>
<span class="r-in">              mnth,</span>
<span class="r-in">            weights = aq$x2,</span>
<span class="r-in">            data = aq</span>
<span class="r-in">            )</span>
<span class="r-in"></span>
<span class="r-in">## Regression table</span>
<span class="r-in">mods = list(mod1, mod2, mod3, mod4)</span>
<span class="r-in">msummary(mods, gof_omit = 'Pseudo|Within|Log|IC', output = 'markdown')</span>
<span class="r-in">"</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">lfe_string</span>, <span class="st">'lfe_script.R'</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Covert to fixest equivalents</span></span>
<span class="r-in"><span class="fu">lfe2fixest</span><span class="op">(</span><span class="st">'lfe_script.R'</span><span class="op">)</span> <span class="co">## no output file provided, will print to screen</span></span>
<span class="r-in"><span class="fu">lfe2fixest</span><span class="op">(</span><span class="st">'lfe_script.R'</span>, <span class="st">'fixest_script.R'</span><span class="op">)</span> <span class="co">## write converted script to disk</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Check equivalence</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## First the lfe version</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="st">'lfe_script.R'</span>, print.eval <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Then the fixest conversion</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="st">'fixest_script.R'</span>, print.eval <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Clean up</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'lfe_script.R'</span>, <span class="st">'fixest_script.R'</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co">## For people that like options, there's the felm2feols() alias...</span></span>
<span class="r-in"><span class="fu">felm2fixest</span><span class="op">(</span><span class="st">'another_felm_script.R'</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Grant McDermott.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer></div>

  

  

  </body></html>

