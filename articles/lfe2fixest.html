<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="lfe2fixest">
<title>lfe2fixest • lfe2fixest</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="lfe2fixest">
<meta property="og:description" content="lfe2fixest">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">lfe2fixest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/lfe2fixest.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/grantmcdermott/lfe2fixest/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">
<script src="lfe2fixest_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>lfe2fixest</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/grantmcdermott/lfe2fixest/blob/HEAD/vignettes/lfe2fixest.Rmd" class="external-link"><code>vignettes/lfe2fixest.Rmd</code></a></small>
      <div class="d-none name"><code>lfe2fixest.Rmd</code></div>
    </div>

    
    
<p>Start by loading this package. Note the example scripts that follow assume you have both <strong>lfe</strong> and <strong>fixest</strong>, as well as <strong>modelsummary</strong> installed on your system.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/grantmcdermott/lfe2fixest" class="external-link">lfe2fixest</a></span><span class="op">)</span> <span class="co">## This package</span>

<span class="co">## Aside: Make sure you have the following packages installed on your system if</span>
<span class="co">## you want to run the example scripts below:</span>
<span class="co">## library(lfe); library(fixest); library(modelsummary)</span></code></pre></div>
<p>Let’s create an <strong>lfe</strong>-based R script, that’s deliberately messy to pose an additional challenge (inconsistent formatting, etc.)</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lfe_string</span> <span class="op">=</span> <span class="st">[1029 chars quoted with '"']</span>
<span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">lfe_string</span>, <span class="st">'lfe_script.R'</span><span class="op">)</span></code></pre></div>
<p>We can now convert this script to the <strong>fixest</strong> equivalent using the package’s main function, <code><a href="../reference/lfe2fixest.html">lfe2fixest()</a></code>, or its alias, <code><a href="../reference/lfe2fixest.html">felm2feols()</a></code>. While the function(s) accept several arguments, the only required argument is an input file. Similarly, if no output file argument is provided, then the function(s) will just print the conversion results to screen.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># felm2feols('lfe_script.R') ## same thing</span>
<span class="fu"><a href="../reference/lfe2fixest.html">lfe2fixest</a></span><span class="op">(</span><span class="st">'lfe_script.R'</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; library(fixest)</span>
<span class="co">#&gt; library(modelsummary)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ## Toy dataset</span>
<span class="co">#&gt; aq = airquality</span>
<span class="co">#&gt; names(aq) = c('y', 'x1', 'x2', 'x3', 'mnth', 'dy')</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ## Simple OLS</span>
<span class="co">#&gt; mod1 = feols(y ~ x1 + x2,  data = aq)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ## Add FE &amp; cluster variable</span>
<span class="co">#&gt; mod2 = feols(y ~ x1 + x2 | dy, cluster = ~mnth,  data = aq)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ## Add a 2nd cluster variable &amp; some estimation options</span>
<span class="co">#&gt; mod3 = feols(y ~ x1 + x2 | dy, cluster = ~dy + mnth,  data =</span>
<span class="co">#&gt;             aq)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ## IV reg with weights</span>
<span class="co">#&gt; mod4 = feols(y ~ 1 | dy | x1 ~ x3, cluster = ~mnth, weights = aq$x2, data = aq )</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ## Multiple IV</span>
<span class="co">#&gt; mod5 = feols(y ~ 1 | x1 + x2 ~ x3 + dy + mnth, cluster = ~dy, data = aq )</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ## Regression table</span>
<span class="co">#&gt; mods = list(mod1, mod2, mod3, mod4, mod5)</span>
<span class="co">#&gt; msummary(mods, gof_omit = 'Pseudo|Within|Log|IC', output = 'markdown')</span></code></pre></div>
<p>Looks good. Note that the <code>feols</code> (<code>felm</code>) model syntax has been cleaned up, with comments removed and everything collapsed onto a single line.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;The loss of inline comments is a little unfortunate, but necessary given the way that the function parses input.&lt;/p&gt;"><sup>1</sup></a> Let’s write it to disk by supplying an output file this time.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># felm2feols(infile = 'lfe_script.R', outfile = 'fixest_script.R') ## same thing</span>
<span class="fu"><a href="../reference/lfe2fixest.html">lfe2fixest</a></span><span class="op">(</span>infile <span class="op">=</span> <span class="st">'lfe_script.R'</span>, outfile <span class="op">=</span> <span class="st">'fixest_script.R'</span><span class="op">)</span></code></pre></div>
<p>Note that the <code><a href="../reference/lfe2fixest.html">lfe2fixest()</a></code> is a pure conversion function. It never actually runs anything from either the input or output files. That being said, here’s a quick comparison of the resulting regressions — i.e. what we get if we actually <em>do</em> run the scripts. As an aside, my scripts make use of the excellent <a href="https://vincentarelbundock.github.io/modelsummary/index.html" class="external-link"><strong>modelsummary</strong></a> package to generate the simple regression tables that you see below, although we’re really not showing off its functionality here.</p>
<p>First, the original <strong>lfe</strong> version:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="st">'lfe_script.R'</span>, print.eval <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; |            | Model 1 | Model 2  |    Model 3    | Model 4  | Model 5  |</span>
<span class="co">#&gt; |:-----------|:-------:|:--------:|:-------------:|:--------:|:--------:|</span>
<span class="co">#&gt; |(Intercept) | 77.246  |          |               |          |  93.452  |</span>
<span class="co">#&gt; |            | (9.068) |          |               |          | (65.757) |</span>
<span class="co">#&gt; |x1          |  0.100  |  0.099   |     0.099     |          |          |</span>
<span class="co">#&gt; |            | (0.026) | (0.031)  |    (0.029)    |          |          |</span>
<span class="co">#&gt; |x2          | -5.402  |  -5.577  |    -5.577     |          |          |</span>
<span class="co">#&gt; |            | (0.673) | (1.100)  |    (1.053)    |          |          |</span>
<span class="co">#&gt; |`x1(fit)`   |         |          |               |  0.733   |  0.236   |</span>
<span class="co">#&gt; |            |         |          |               | (0.254)  | (0.179)  |</span>
<span class="co">#&gt; |`x2(fit)`   |         |          |               |          |  -9.558  |</span>
<span class="co">#&gt; |            |         |          |               |          | (3.510)  |</span>
<span class="co">#&gt; |Num.Obs.    |   111   |   111    |      111      |   111    |   111    |</span>
<span class="co">#&gt; |R2          |  0.449  |  0.665   |     0.665     |  -2.658  |  0.071   |</span>
<span class="co">#&gt; |R2 Adj.     |  0.439  |  0.527   |     0.527     |  -4.093  |  0.054   |</span>
<span class="co">#&gt; |Std.Errors  |         | by: mnth | by: dy &amp; mnth | by: mnth |  by: dy  |</span></code></pre></div>
<p>Second, the <strong>fixest</strong> conversion:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="st">'fixest_script.R'</span>, print.eval <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; |            | Model 1 | Model 2  |    Model 3    | Model 4  | Model 5  |</span>
<span class="co">#&gt; |:-----------|:-------:|:--------:|:-------------:|:--------:|:--------:|</span>
<span class="co">#&gt; |(Intercept) | 77.246  |          |               |          |  93.452  |</span>
<span class="co">#&gt; |            | (9.068) |          |               |          | (65.757) |</span>
<span class="co">#&gt; |x1          |  0.100  |  0.099   |     0.099     |          |          |</span>
<span class="co">#&gt; |            | (0.026) | (0.031)  |    (0.029)    |          |          |</span>
<span class="co">#&gt; |x2          | -5.402  |  -5.577  |    -5.577     |          |          |</span>
<span class="co">#&gt; |            | (0.673) | (1.100)  |    (1.053)    |          |          |</span>
<span class="co">#&gt; |fit_x1      |         |          |               |  0.733   |  0.236   |</span>
<span class="co">#&gt; |            |         |          |               | (0.254)  | (0.179)  |</span>
<span class="co">#&gt; |fit_x2      |         |          |               |          |  -9.558  |</span>
<span class="co">#&gt; |            |         |          |               |          | (3.510)  |</span>
<span class="co">#&gt; |Num.Obs.    |   111   |   111    |      111      |   111    |   111    |</span>
<span class="co">#&gt; |R2          |  0.449  |  0.665   |     0.665     |  -2.658  |  0.071   |</span>
<span class="co">#&gt; |R2 Adj.     |  0.439  |  0.527   |     0.527     |  -4.093  |  0.054   |</span>
<span class="co">#&gt; |Std.Errors  |   IID   | by: mnth | by: dy &amp; mnth | by: mnth |  by: dy  |</span>
<span class="co">#&gt; |FE: dy      |         |    X     |       X       |    X     |          |</span></code></pre></div>
<p>Some minor formatting differences aside, looks like it worked and we get the exact same results from both scripts. Great!</p>
<p>Let’s clean up before closing.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'lfe_script.R'</span>, <span class="st">'fixest_script.R'</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE TRUE</span></code></pre></div>

  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Grant McDermott.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
